"use strict";(self.webpackChunkmspr_arosaje_strapi=self.webpackChunkmspr_arosaje_strapi||[]).push([[9497],{81959:(q,I,a)=>{a.r(I),a.d(I,{default:()=>me});var e=a(53547),m=a(14087),S=a(185),U=a(53979),x=a(49066),Q=a(29728),f=a(41580),v=a(11047),l=a(42609),M=a(85018),P=a(41054),L=a(64593),C=a(86896),R=a(88767),_=a(50592),ee=a(51319),W=a(19631),$=a(16364),ae=a(25752),b=a(84170),O=a(11276),u=a(67819),N=a(8934),B=a(94123),te=a(45697),t=a.n(te),X=a(88972);const Y=(0,X.ZP)($.o)`
  ::-ms-reveal {
    display: none;
  }
`,D=(0,X.ZP)(ae.E)`
  svg {
    height: ${(0,l.pxToRem)(16)};
    width: ${(0,l.pxToRem)(16)};
    path {
      fill: ${({theme:s})=>s.colors.neutral600};
    }
  }
`,G=({errors:s,onChange:d,values:c})=>{const{formatMessage:i}=(0,C.Z)(),[r,T]=(0,e.useState)(!1),[n,A]=(0,e.useState)(!1),[Z,z]=(0,e.useState)(!1);return e.createElement(f.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(v.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(b.Z,{variant:"delta",as:"h2"},i({id:"global.change-password",defaultMessage:"Change password"})),e.createElement(O.r,{gap:5},e.createElement(u.P,{s:12,col:6},e.createElement($.o,{error:s.currentPassword?i({id:s.currentPassword,defaultMessage:s.currentPassword}):"",onChange:d,value:c.currentPassword,label:i({id:"Auth.form.currentPassword.label",defaultMessage:"Current Password"}),name:"currentPassword",type:r?"text":"password",endAction:e.createElement(D,{onClick:h=>{h.stopPropagation(),T(E=>!E)},label:i(r?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},r?e.createElement(N.Z,null):e.createElement(B.Z,null))}))),e.createElement(O.r,{gap:5},e.createElement(u.P,{s:12,col:6},e.createElement(Y,{error:s.password?i({id:s.password,defaultMessage:s.password}):"",onChange:d,value:c.password,label:i({id:"global.password",defaultMessage:"Password"}),name:"password",type:n?"text":"password",autoComplete:"new-password",endAction:e.createElement(D,{onClick:h=>{h.stopPropagation(),A(E=>!E)},label:i(n?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},n?e.createElement(N.Z,null):e.createElement(B.Z,null))})),e.createElement(u.P,{s:12,col:6},e.createElement(Y,{error:s.confirmPassword?i({id:s.confirmPassword,defaultMessage:s.confirmPassword}):"",onChange:d,value:c.confirmPassword,label:i({id:"Auth.form.confirmPassword.label",defaultMessage:"Password confirmation"}),name:"confirmPassword",type:Z?"text":"password",autoComplete:"new-password",endAction:e.createElement(D,{onClick:h=>{h.stopPropagation(),z(E=>!E)},label:i(Z?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},Z?e.createElement(N.Z,null):e.createElement(B.Z,null))})))))};G.propTypes={errors:t().shape({currentPassword:t().string,password:t().string,confirmPassword:t().string}),onChange:t().func,values:t().shape({currentPassword:t().string,password:t().string,confirmPassword:t().string})},G.defaultProps={errors:{},onChange(){},values:{currentPassword:"",password:"",confirmPassword:""}};const se=G;var J=a(40619),V=a(82562),re=a(11700),ne=a.n(re);const H=({onChange:s,values:d,localeNames:c,allApplicationThemes:i})=>{const{formatMessage:r}=(0,C.Z)(),T=Object.keys(i).filter(n=>i[n]);return e.createElement(f.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(v.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(v.k,{direction:"column",alignItems:"stretch",gap:1},e.createElement(b.Z,{variant:"delta",as:"h2"},r({id:"Settings.profile.form.section.experience.title",defaultMessage:"Experience"})),e.createElement(b.Z,null,r({id:"Settings.profile.form.section.experience.interfaceLanguageHelp",defaultMessage:"Preference changes will apply only to you. More information is available {here}."},{here:e.createElement(f.x,{as:"a",color:"primary600",target:"_blank",rel:"noopener noreferrer",href:"https://docs.strapi.io/developer-docs/latest/development/admin-customization.html#locales"},r({id:"Settings.profile.form.section.experience.here",defaultMessage:"here"}))}))),e.createElement(O.r,{gap:5},e.createElement(u.P,{s:12,col:6},e.createElement(J.P,{label:r({id:"Settings.profile.form.section.experience.interfaceLanguage",defaultMessage:"Interface language"}),placeholder:r({id:"global.select",defaultMessage:"Select"}),hint:r({id:"Settings.profile.form.section.experience.interfaceLanguage.hint",defaultMessage:"This will only display your own interface in the chosen language."}),onClear:()=>{s({target:{name:"preferedLanguage",value:null}})},clearLabel:r({id:"Settings.profile.form.section.experience.clear.select",defaultMessage:"Clear the interface language selected"}),value:d.preferedLanguage,onChange:n=>{s({target:{name:"preferedLanguage",value:n}})}},Object.entries(c).map(([n,A])=>e.createElement(V.W,{value:n,key:n},A)))),e.createElement(u.P,{s:12,col:6},e.createElement(J.P,{label:r({id:"Settings.profile.form.section.experience.mode.label",defaultMessage:"Interface mode"}),placeholder:r({id:"components.Select.placeholder",defaultMessage:"Select"}),hint:r({id:"Settings.profile.form.section.experience.mode.hint",defaultMessage:"Displays your interface in the chosen mode."}),value:d.currentTheme,onChange:n=>{s({target:{name:"currentTheme",value:n}})}},T.map(n=>e.createElement(V.W,{value:n,key:n},r({id:"Settings.profile.form.section.experience.mode.option-label",defaultMessage:"{name} mode"},{name:r({id:n,defaultMessage:ne()(n)})}))))))))};H.propTypes={allApplicationThemes:t().object,onChange:t().func,values:t().shape({preferedLanguage:t().string,currentTheme:t().string}),localeNames:t().object},H.defaultProps={allApplicationThemes:{},onChange(){},values:{preferedLanguage:null,currentTheme:""},localeNames:{}};const oe=H,j=({errors:s,onChange:d,values:c})=>{const{formatMessage:i}=(0,C.Z)();return e.createElement(f.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(v.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(b.Z,{variant:"delta",as:"h2"},i({id:"global.profile",defaultMessage:"Profile"})),e.createElement(O.r,{gap:5},e.createElement(u.P,{s:12,col:6},e.createElement(l.GenericInput,{intlLabel:{id:"Auth.form.firstname.label",defaultMessage:"First name"},error:s.firstname,onChange:d,value:c.firstname,type:"text",name:"firstname",required:!0})),e.createElement(u.P,{s:12,col:6},e.createElement(l.GenericInput,{intlLabel:{id:"Auth.form.lastname.label",defaultMessage:"Last name"},error:s.lastname,onChange:d,value:c.lastname,type:"text",name:"lastname"})),e.createElement(u.P,{s:12,col:6},e.createElement(l.GenericInput,{intlLabel:{id:"Auth.form.email.label",defaultMessage:"Email"},error:s.email,onChange:d,value:c.email,type:"email",name:"email",required:!0})),e.createElement(u.P,{s:12,col:6},e.createElement(l.GenericInput,{intlLabel:{id:"Auth.form.username.label",defaultMessage:"Username"},error:s.username,onChange:d,value:c.username,type:"text",name:"username"})))))};j.propTypes={errors:t().shape({firstname:t().string,lastname:t().string,username:t().string,email:t().string}),onChange:t().func,values:t().shape({firstname:t().string,lastname:t().string,username:t().string,email:t().string})},j.defaultProps={errors:{},onChange(){},values:{firstname:"",lastname:"",username:"",email:""}};const le=j;var ie=a(87561),de=a(17405);const ce=ie.Ry().shape(de.Rw),me=()=>{const{changeLocale:s,localeNames:d}=(0,_.Z)(),{setUserDisplayName:c}=(0,l.useAppInfo)(),i=(0,R.useQueryClient)(),{formatMessage:r}=(0,C.Z)(),{trackUsage:T}=(0,l.useTracking)(),n=(0,l.useNotification)(),{lockApp:A,unlockApp:Z}=(0,l.useOverlayBlocker)(),{notifyStatus:z}=(0,m.G)(),{currentTheme:h,themes:E,onChangeTheme:ue}=(0,ee.M1)(),{get:K,put:pe}=(0,l.useFetchClient)();(0,l.useFocusWhenNavigate)();const{isLoading:ge,data:F}=(0,R.useQuery)("user",async()=>{const{data:o}=await K("/admin/users/me");return o.data},{onSuccess(){z(r({id:"Settings.profile.form.notify.data.loaded",defaultMessage:"Your profile data has been loaded"}))},onError(){n({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),{isLoading:fe,data:he}=(0,R.useQuery)(["providers","isSSOLocked"],async()=>{if(window.strapi.isEE){const{data:{data:o}}=await K("/admin/providers/isSSOLocked");return o}return{isSSOLocked:!1}},{onError(){n({type:"warning",message:{id:"Settings.permissions.users.sso.provider.error"}})}}),Ee=ge||fe,k=(0,R.useMutation)(async o=>{const{confirmPassword:p,currentTheme:g,...w}=o,{data:y}=await pe("/admin/users/me",w);return{...y.data,currentTheme:o.currentTheme}},{async onSuccess(o){await i.invalidateQueries("user");const{email:p,firstname:g,lastname:w,username:y,preferedLanguage:Ze}=o;l.auth.setUserInfo({email:p,firstname:g,lastname:w,username:y,preferedLanguage:Ze});const Ie=o.username||(0,W.Pp)(o.firstname,o.lastname);c(Ie),s(o.preferedLanguage),ue(o.currentTheme),T("didChangeMode",{newMode:o.currentTheme}),n({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}})},onSettled(){Z()},refetchActive:!0}),{isLoading:we}=k,ve=async(o,{setErrors:p})=>{A();const g=o.username||null;k.mutate({...o,username:g},{onError(w){const y=w?.response?.data;return y?.data?p(y.data):n({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};if(Ee)return e.createElement(S.o,{"aria-busy":"true"},e.createElement(L.q,{title:r({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),e.createElement(U.T,{title:r({id:"Settings.profile.form.section.profile.page.title",defaultMessage:"Profile page"})}),e.createElement(x.D,null,e.createElement(l.LoadingIndicatorPage,null)));const Pe=he?.isSSOLocked,{email:ye,firstname:Se,lastname:Me,username:Le,preferedLanguage:Te}=F,Ae={email:ye,firstname:Se,lastname:Me,username:Le,preferedLanguage:Te,currentTheme:h};return e.createElement(S.o,{"aria-busy":we},e.createElement(L.q,{title:r({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),e.createElement(P.J9,{onSubmit:ve,initialValues:Ae,validateOnChange:!1,validationSchema:ce,enableReinitialize:!0},({errors:o,values:p,handleChange:g,isSubmitting:w})=>e.createElement(l.Form,null,e.createElement(U.T,{title:F.username||(0,W.Pp)(F.firstname,F.lastname),primaryAction:e.createElement(Q.z,{startIcon:e.createElement(M.Z,null),loading:w,type:"submit"},r({id:"global.save",defaultMessage:"Save"}))}),e.createElement(f.x,{paddingBottom:10},e.createElement(x.D,null,e.createElement(v.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(le,{errors:o,onChange:g,values:p}),!Pe&&e.createElement(se,{errors:o,onChange:g,values:p}),e.createElement(oe,{allApplicationThemes:E,onChange:g,values:p,localeNames:d})))))))}},17405:(q,I,a)=>{a.d(I,{YM:()=>l,Rw:()=>x});var e=a(87561),m=a(42609);const S={firstname:e.Z_().trim().required(m.translatedErrors.required),lastname:e.Z_(),email:e.Z_().email(m.translatedErrors.email).lowercase().required(m.translatedErrors.required),username:e.Z_().nullable(),password:e.Z_().min(8,m.translatedErrors.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number"),confirmPassword:e.Z_().min(8,m.translatedErrors.minLength).oneOf([e.iH("password"),null],"components.Input.error.password.noMatch").when("password",(M,P)=>M?P.required(m.translatedErrors.required):P)},x={...S,currentPassword:e.Z_().when(["password","confirmPassword"],(M,P,L)=>M||P?L.required(m.translatedErrors.required):L),preferedLanguage:e.Z_().nullable()},f={roles:e.IX().min(1,m.translatedErrors.required).required(m.translatedErrors.required)},l=e.Ry().shape({...S,isActive:e.Xg(),...f})}}]);
