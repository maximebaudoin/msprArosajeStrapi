"use strict";(self.webpackChunkmspr_arosaje_strapi=self.webpackChunkmspr_arosaje_strapi||[]).push([[695],{85078:($,h,e)=>{e.r(h),e.d(h,{SettingsPage:()=>v,default:()=>Z});var t=e(53547),b=e(185),D=e(53979),C=e(29728),y=e(49066),M=e(17034),g=e(11047),S=e(41580),T=e(84170),z=e(11276),m=e(67819),u=e(93127),l=e(42609),B=e(85018),P=e(52861),I=e(18446),L=e.n(I),k=e(64593),A=e(86896),N=e(16838),i=e(57197);const x=a=>a;var R=e(18172),U=e(36968),G=e.n(U);const F={isLoading:!0,isSubmiting:!1,initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}},H=(a,o)=>(0,R.ZP)(a,n=>{switch(o.type){case"CANCEL_CHANGES":{n.modifiedData=a.initialData;break}case"GET_DATA_SUCCEEDED":{n.isLoading=!1,n.initialData=o.data,n.modifiedData=o.data;break}case"ON_CHANGE":{G()(n,["modifiedData",...o.keys.split(".")],o.value);break}case"ON_SUBMIT":{n.isSubmiting=!0;break}case"SUBMIT_SUCCEEDED":{n.initialData=a.modifiedData,n.isSubmiting=!1;break}case"ON_SUBMIT_ERROR":{n.isSubmiting=!1;break}default:return a}}),v=()=>{const{formatMessage:a}=(0,A.Z)(),{lockApp:o,unlockApp:n}=(0,l.useOverlayBlocker)(),j=(0,l.useNotification)(),{get:W,put:X}=(0,l.useFetchClient)();(0,l.useFocusWhenNavigate)();const[{initialData:J,isLoading:K,isSubmiting:Q,modifiedData:d},c]=(0,t.useReducer)(H,F,x),E=(0,t.useRef)(!0);(0,t.useEffect)(()=>{const r=P.default.CancelToken.source(),Y=async()=>{try{const{data:{data:p}}=await W((0,i.IF)("settings"),{cancelToken:r.token});c({type:"GET_DATA_SUCCEEDED",data:p})}catch(p){console.error(p)}};return E.current&&Y(),()=>{r.cancel("Operation canceled by the user."),E.current=!1}},[]);const O=L()(J,d),V=async s=>{if(s.preventDefault(),!O){o(),c({type:"ON_SUBMIT"});try{await X((0,i.IF)("settings"),d),c({type:"SUBMIT_SUCCEEDED"}),j({type:"success",message:{id:"notification.form.success.fields"}})}catch(r){console.error(r),c({type:"ON_SUBMIT_ERROR"})}n()}},f=({target:{name:s,value:r}})=>{c({type:"ON_CHANGE",keys:s,value:r})};return t.createElement(b.o,{tabIndex:-1},t.createElement(k.q,{title:a({id:(0,i.OB)("page.title"),defaultMessage:"Settings - Media Libray"})}),t.createElement("form",{onSubmit:V},t.createElement(D.T,{title:a({id:(0,i.OB)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:t.createElement(C.z,{disabled:O,"data-testid":"save-button",loading:Q,type:"submit",startIcon:t.createElement(B.Z,null),size:"S"},a({id:"global.save",defaultMessage:"Save"})),subtitle:a({id:(0,i.OB)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),t.createElement(y.D,null,K?t.createElement(l.LoadingIndicatorPage,null):t.createElement(M.A,null,t.createElement(g.k,{direction:"column",alignItems:"stretch",gap:12},t.createElement(S.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(g.k,{direction:"column",alignItems:"stretch",gap:4},t.createElement(g.k,null,t.createElement(T.Z,{variant:"delta",as:"h2"},a({id:(0,i.OB)("settings.blockTitle"),defaultMessage:"Asset management"}))),t.createElement(z.r,{gap:6},t.createElement(m.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"responsiveDimensions","data-testid":"responsiveDimensions",checked:d.responsiveDimensions,hint:a({id:(0,i.OB)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:a({id:(0,i.OB)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{f({target:{name:"responsiveDimensions",value:s.target.checked}})}})),t.createElement(m.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"sizeOptimization","data-testid":"sizeOptimization",checked:d.sizeOptimization,hint:a({id:(0,i.OB)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:a({id:(0,i.OB)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{f({target:{name:"sizeOptimization",value:s.target.checked}})}})),t.createElement(m.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"autoOrientation","data-testid":"autoOrientation",checked:d.autoOrientation,hint:a({id:(0,i.OB)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:a({id:(0,i.OB)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{f({target:{name:"autoOrientation",value:s.target.checked}})}}))))))))))},Z=()=>t.createElement(l.CheckPagePermissions,{permissions:N.Z.settings},t.createElement(v,null))}}]);
