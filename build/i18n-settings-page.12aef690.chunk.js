"use strict";(self.webpackChunkmspr_arosaje_strapi=self.webpackChunkmspr_arosaje_strapi||[]).push([[3552],{72751:(He,b,t)=>{t.r(b),t.d(b,{default:()=>je});var e=t(53547),u=t(42609),le=t(2135),ne=t(45697),c=t.n(ne),se=t(185),oe=t(53979),L=t(29728),ie=t(49066),ce=t(89722),I=t(96315),de=t(86031),v=t(86896),z=t(8181),s=t(57813),V=t(42866),j=t(24969),E=t(84170),G=t(59946),H=t(82777),T=t(11047),C=t(77296),U=t(70004),W=t(41580),S=t(42761),J=t(36856),Q=t(85018),M=t(41054),re=t(27361),me=t.n(re),N=t(86706),Z=t(7982);const ue=()=>{const[l,n]=(0,e.useState)(!1),o=(0,N.I0)(),a=(0,u.useNotification)(),{post:i}=(0,u.useFetchClient)();return{isAdding:l,addLocale:async r=>{n(!0);try{const{data:m}=await i("/i18n/locales",r);a({type:"success",message:{id:(0,s.O)("Settings.locales.modal.create.success")}}),o({type:Z.xz,newLocale:m})}catch(m){const g=me()(m,"response.payload.message",null);throw g&&g.includes("already exists")?a({type:"warning",message:{id:(0,s.O)("Settings.locales.modal.create.alreadyExist")}}):a({type:"warning",message:{id:"notification.error"}}),m}finally{n(!1)}}}};var A=t(87561);const X=(0,A.Ry)().shape({code:(0,A.Z_)().required(),displayName:(0,A.Z_)().max(50,"Settings.locales.modal.locales.displayName.error").required(u.translatedErrors.required)});var $=t(36213);const ge=()=>{const{values:l,setFieldValue:n}=(0,M.u6)(),{formatMessage:o}=(0,v.Z)();return e.createElement($.X,{hint:o({id:(0,s.O)("Settings.locales.modal.advanced.setAsDefault.hint"),defaultMessage:"One default locale is required, change it by selecting another one"}),onChange:()=>n("isDefault",!l.isDefault),value:l.isDefault},o({id:(0,s.O)("Settings.locales.modal.advanced.setAsDefault"),defaultMessage:"Set as default locale"}))};var K=t(11276),D=t(67819),Y=t(16364),fe=t(29178),ve=t(90608),Ee=t(14087),pe=t(88767);const w=()=>{const{formatMessage:l}=(0,v.Z)(),{notifyStatus:n}=(0,Ee.G)(),o=(0,u.useNotification)(),{get:a}=(0,u.useFetchClient)(),{isLoading:i,data:d}=(0,pe.useQuery)(["plugin-i18n","locales"],async()=>{try{const{data:r}=await a("/i18n/iso-locales");return n(l({id:(0,s.O)("Settings.locales.modal.locales.loaded"),defaultMessage:"The locales have been successfully loaded."})),r}catch{return o({type:"warning",message:{id:"notification.error"}}),[]}});return{defaultLocales:d,isLoading:i}},R=e.memo(({value:l,onClear:n,onLocaleChange:o,error:a})=>{const{formatMessage:i}=(0,v.Z)(),{defaultLocales:d,isLoading:r}=w(),{locales:m}=(0,z.Z)(),g=(d||[]).map(f=>({label:f.name,value:f.code})).filter(({value:f})=>{const y=m.find(({code:O})=>O===f);return!y||y.code===l}),h=l||"";return e.createElement(fe.hQ,{"aria-busy":r,error:a,label:i({id:(0,s.O)("Settings.locales.modal.locales.label"),defaultMessage:"Locales"}),value:h,onClear:l?n:void 0,onChange:f=>{const y=g.find(O=>O.value===f);y&&o({code:y.value,displayName:y.label})},placeholder:i({id:"components.placeholder.select",defaultMessage:"Select"})},g.map(f=>e.createElement(ve.O,{value:f.value,key:f.value},f.label)))});R.defaultProps={error:void 0,value:void 0,onClear(){},onLocaleChange:()=>{}},R.propTypes={error:c().string,onClear:c().func,onLocaleChange:c().func,value:c().string};const ye=R,he=()=>{const{formatMessage:l}=(0,v.Z)(),{values:n,handleChange:o,setFieldValue:a,errors:i}=(0,M.u6)(),d=(0,e.useCallback)(m=>{a("displayName",m.displayName),a("code",m.code)},[a]),r=(0,e.useCallback)(()=>{a("displayName",""),a("code","")},[a]);return e.createElement(K.r,{gap:4},e.createElement(D.P,{col:6},e.createElement(ye,{error:i.code,value:n.code,onLocaleChange:d,onClear:r})),e.createElement(D.P,{col:6},e.createElement(Y.o,{name:"displayName",label:l({id:(0,s.O)("Settings.locales.modal.locales.displayName"),defaultMessage:"Locale display name"}),hint:l({id:(0,s.O)("Settings.locales.modal.locales.displayName.description"),defaultMessage:"Locale will be displayed under that name in the administration panel"}),error:i.displayName?l({id:(0,s.O)("Settings.locales.modal.locales.displayName.error"),defaultMessage:"The locale display name can only be less than 50 characters."}):void 0,value:n.displayName,onChange:o})))},Le={code:"",displayName:"",isDefault:!1},q=({onClose:l})=>{const{isAdding:n,addLocale:o}=ue(),{formatMessage:a}=(0,v.Z)(),{refetchPermissions:i}=(0,u.useRBACProvider)(),d=async r=>{await o({code:r.code,name:r.displayName,isDefault:r.isDefault}),await i()};return e.createElement(V.P,{onClose:l,labelledBy:"add-locale-title"},e.createElement(M.J9,{initialValues:Le,onSubmit:d,validationSchema:X,validateOnChange:!1},e.createElement(u.Form,null,e.createElement(j.x,null,e.createElement(E.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"add-locale-title"},a({id:(0,s.O)("Settings.list.actions.add"),defaultMessage:"Add new locale"}))),e.createElement(G.f,null,e.createElement(H.v,{label:a({id:(0,s.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"}),id:"tabs",variant:"simple"},e.createElement(T.k,{justifyContent:"space-between"},e.createElement(E.Z,{as:"h2",variant:"beta"},a({id:(0,s.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"})),e.createElement(C.m,null,e.createElement(C.O,null,a({id:(0,s.O)("Settings.locales.modal.base"),defaultMessage:"Basic settings"})),e.createElement(C.O,null,a({id:(0,s.O)("Settings.locales.modal.advanced"),defaultMessage:"Advanced settings"})))),e.createElement(U.i,null),e.createElement(W.x,{paddingTop:7,paddingBottom:7},e.createElement(S.n,null,e.createElement(S.x,null,e.createElement(he,null)),e.createElement(S.x,null,e.createElement(ge,null)))))),e.createElement(J.m,{startActions:e.createElement(L.z,{variant:"tertiary",onClick:l},a({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(L.z,{type:"submit",startIcon:e.createElement(Q.Z,null),disabled:n},a({id:"global.save",defaultMessage:"Save"}))}))))};q.propTypes={onClose:c().func.isRequired};const Ce=q,Se=()=>{const[l,n]=(0,e.useState)(!1),o=(0,N.I0)(),a=(0,u.useNotification)(),{del:i}=(0,u.useFetchClient)();return{isDeleting:l,deleteLocale:async r=>{try{n(!0),await i(`/i18n/locales/${r}`),a({type:"success",message:{id:(0,s.O)("Settings.locales.modal.delete.success")}}),o({type:Z.HC,id:r})}catch{a({type:"warning",message:{id:"notification.error"}})}finally{n(!1)}}}},P=({localeToDelete:l,onClose:n})=>{const{isDeleting:o,deleteLocale:a}=Se(),i=Boolean(l),d=()=>a(l.id).then(n);return e.createElement(u.ConfirmDialog,{isConfirmButtonLoading:o,onConfirm:d,onToggleDialog:n,isOpen:i})};P.defaultProps={localeToDelete:void 0},P.propTypes={localeToDelete:c().shape({id:c().number.isRequired}),onClose:c().func.isRequired};const Me=P,Oe=()=>{const[l,n]=(0,e.useState)(!1),o=(0,N.I0)(),a=(0,u.useNotification)(),{put:i}=(0,u.useFetchClient)();return{isEditing:l,editLocale:async(r,m)=>{try{n(!0);const{data:g}=await i(`/i18n/locales/${r}`,m);a({type:"success",message:{id:(0,s.O)("Settings.locales.modal.edit.success")}}),o({type:Z.OT,editedLocale:g})}catch{a({type:"warning",message:{id:"notification.error"}})}finally{n(!1)}}}},k=({isDefaultLocale:l})=>{const{values:n,setFieldValue:o}=(0,M.u6)(),{formatMessage:a}=(0,v.Z)();return e.createElement($.X,{name:"isDefault",hint:a({id:(0,s.O)("Settings.locales.modal.advanced.setAsDefault.hint"),defaultMessage:"One default locale is required, change it by selecting another one"}),onChange:()=>o("isDefault",!n.isDefault),value:n.isDefault,disabled:l},a({id:(0,s.O)("Settings.locales.modal.advanced.setAsDefault"),defaultMessage:"Set as default locale"}))};k.propTypes={isDefaultLocale:c().bool.isRequired};const De=k;var Te=t(40619),Ne=t(82562);const _=({locale:l})=>{const{formatMessage:n}=(0,v.Z)(),{values:o,handleChange:a,errors:i}=(0,M.u6)(),{defaultLocales:d,isLoading:r}=w(),m=!r&&d.find(g=>g.code===l.code);return e.createElement(K.r,{gap:4},e.createElement(D.P,{col:6},e.createElement(Te.P,{label:n({id:(0,s.O)("Settings.locales.modal.locales.label"),defaultMessage:"Locales"}),value:m?.code||l.code,disabled:!0},e.createElement(Ne.W,{value:m?.code||l.code},m?.name||l.code))),e.createElement(D.P,{col:6},e.createElement(Y.o,{name:"displayName",label:n({id:(0,s.O)("Settings.locales.modal.locales.displayName"),defaultMessage:"Locale display name"}),hint:n({id:(0,s.O)("Settings.locales.modal.locales.displayName.description"),defaultMessage:"Locale will be displayed under that name in the administration panel"}),error:i.displayName?n({id:(0,s.O)("Settings.locales.modal.locales.displayName.error"),defaultMessage:"The locale display name can only be less than 50 characters."}):void 0,value:o.displayName,onChange:a})))},Ze=_;_.propTypes={locale:c().shape({id:c().number.isRequired,name:c().string.isRequired,code:c().string.isRequired,isDefault:c().bool.isRequired}).isRequired};const x=({locale:l,onClose:n})=>{const{refetchPermissions:o}=(0,u.useRBACProvider)(),{isEditing:a,editLocale:i}=Oe(),{formatMessage:d}=(0,v.Z)(),r=async({displayName:m,isDefault:g})=>{await i(l.id,{name:m,isDefault:g}),await o()};return e.createElement(V.P,{onClose:n,labelledBy:"edit-locale-title"},e.createElement(M.J9,{initialValues:{code:l?.code,displayName:l?.name||"",isDefault:Boolean(l?.isDefault)},onSubmit:r,validationSchema:X},e.createElement(u.Form,null,e.createElement(j.x,null,e.createElement(E.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"edit-locale-title"},d({id:(0,s.O)("Settings.list.actions.edit"),defaultMessage:"Edit a locale"}))),e.createElement(G.f,null,e.createElement(H.v,{label:d({id:(0,s.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"}),id:"tabs",variant:"simple"},e.createElement(T.k,{justifyContent:"space-between"},e.createElement(E.Z,{as:"h2"},d({id:(0,s.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"})),e.createElement(C.m,null,e.createElement(C.O,null,d({id:(0,s.O)("Settings.locales.modal.base"),defaultMessage:"Basic settings"})),e.createElement(C.O,null,d({id:(0,s.O)("Settings.locales.modal.advanced"),defaultMessage:"Advanced settings"})))),e.createElement(U.i,null),e.createElement(W.x,{paddingTop:7,paddingBottom:7},e.createElement(S.n,null,e.createElement(S.x,null,e.createElement(Ze,{locale:l})),e.createElement(S.x,null,e.createElement(De,{isDefaultLocale:Boolean(l&&l.isDefault)})))))),e.createElement(J.m,{startActions:e.createElement(L.z,{variant:"tertiary",onClick:n},d({id:"app.components.Button.cancel"})),endActions:e.createElement(L.z,{type:"submit",startIcon:e.createElement(Q.Z,null),disabled:a},d({id:"global.save"}))}))))};x.defaultProps={locale:void 0},x.propTypes={locale:c().shape({id:c().number.isRequired,name:c().string.isRequired,code:c().string.isRequired,isDefault:c().bool.isRequired}),onClose:c().func.isRequired};const Ae=x;var Re=t(38939),Pe=t(8060),ee=t(79031),p=t(37909),xe=t(63237),Be=t(15234),te=t(12028),Fe=t(4585),be=t(20022);const B=({locales:l,onDeleteLocale:n,onEditLocale:o})=>{const{formatMessage:a}=(0,v.Z)();return e.createElement(Re.i,{colCount:4,rowCount:l.length+1},e.createElement(Pe.h,null,e.createElement(ee.Tr,null,e.createElement(p.Th,null,e.createElement(E.Z,{variant:"sigma",textColor:"neutral600"},a({id:(0,s.O)("Settings.locales.row.id")}))),e.createElement(p.Th,null,e.createElement(E.Z,{variant:"sigma",textColor:"neutral600"},a({id:(0,s.O)("Settings.locales.row.displayName")}))),e.createElement(p.Th,null,e.createElement(E.Z,{variant:"sigma",textColor:"neutral600"},a({id:(0,s.O)("Settings.locales.row.default-locale")}))),e.createElement(p.Th,null,e.createElement(xe.T,null,"Actions")))),e.createElement(Be.p,null,l.map(i=>e.createElement(ee.Tr,{key:i.id,...(0,u.onRowClick)({fn:()=>o(i),condition:o})},e.createElement(p.Td,null,e.createElement(E.Z,{textColor:"neutral800"},i.id)),e.createElement(p.Td,null,e.createElement(E.Z,{textColor:"neutral800"},i.name)),e.createElement(p.Td,null,e.createElement(E.Z,{textColor:"neutral800"},i.isDefault?a({id:(0,s.O)("Settings.locales.default")}):null)),e.createElement(p.Td,null,e.createElement(T.k,{gap:1,justifyContent:"flex-end",...u.stopPropagation},o&&e.createElement(te.h,{onClick:()=>o(i),label:a({id:(0,s.O)("Settings.list.actions.edit")}),icon:e.createElement(Fe.Z,null),noBorder:!0}),n&&!i.isDefault&&e.createElement(te.h,{onClick:()=>n(i),label:a({id:(0,s.O)("Settings.list.actions.delete")}),icon:e.createElement(be.Z,null),noBorder:!0})))))))};B.defaultProps={locales:[],onDeleteLocale:void 0,onEditLocale:void 0},B.propTypes={locales:c().array,onDeleteLocale:c().func,onEditLocale:c().func};const Ie=B,F=({canUpdateLocale:l,canDeleteLocale:n,onToggleCreateModal:o,isCreating:a})=>{const[i,d]=(0,e.useState)(),[r,m]=(0,e.useState)(),{locales:g}=(0,z.Z)(),{formatMessage:h}=(0,v.Z)();(0,u.useFocusWhenNavigate)();const f=()=>d(void 0),y=n?d:void 0,O=()=>m(void 0),Ge=l?m:void 0;return e.createElement(se.o,{tabIndex:-1},e.createElement(oe.T,{primaryAction:e.createElement(L.z,{startIcon:e.createElement(I.Z,null),onClick:o,size:"S"},h({id:(0,s.O)("Settings.list.actions.add")})),title:h({id:(0,s.O)("plugin.name")}),subtitle:h({id:(0,s.O)("Settings.list.description")})}),e.createElement(ie.D,null,g?.length>0?e.createElement(Ie,{locales:g,onDeleteLocale:y,onEditLocale:Ge}):e.createElement(ce.x,{icon:e.createElement(de.Z,{width:void 0,height:void 0}),content:h({id:(0,s.O)("Settings.list.empty.title")}),action:o?e.createElement(L.z,{variant:"secondary",startIcon:e.createElement(I.Z,null),onClick:o},h({id:(0,s.O)("Settings.list.actions.add")})):null})),a&&e.createElement(Ce,{onClose:o}),r&&e.createElement(Ae,{onClose:O,locale:r}),e.createElement(Me,{localeToDelete:i,onClose:f}))};F.defaultProps={onToggleCreateModal:void 0},F.propTypes={canUpdateLocale:c().bool.isRequired,canDeleteLocale:c().bool.isRequired,onToggleCreateModal:c().func,isCreating:c().bool.isRequired};const ze=F,ae=({canReadLocale:l,canCreateLocale:n,canDeleteLocale:o,canUpdateLocale:a})=>{const[i,d]=(0,e.useState)(!1),r=n?()=>d(m=>!m):void 0;return l?e.createElement(ze,{canUpdateLocale:a,canDeleteLocale:o,onToggleCreateModal:r,isCreating:i}):null};ae.propTypes={canReadLocale:c().bool.isRequired,canCreateLocale:c().bool.isRequired,canUpdateLocale:c().bool.isRequired,canDeleteLocale:c().bool.isRequired};const Ve=ae,je=()=>{const{isLoading:l,allowedActions:{canRead:n,canUpdate:o,canCreate:a,canDelete:i}}=(0,u.useRBAC)(le.Z);return l?null:e.createElement(Ve,{canReadLocale:n,canCreateLocale:a,canUpdateLocale:o,canDeleteLocale:i})}}}]);
