"use strict";(self.webpackChunkmspr_arosaje_strapi=self.webpackChunkmspr_arosaje_strapi||[]).push([[8503],{31346:(f,o,e)=>{e.r(o),e.d(o,{default:()=>x});var t=e(53547),r=e(185),i=e(53979),l=e(29728),R=e(49066),v=e(41580),M=e(11047),c=e(84170),P=e(11276),E=e(67819),A=e(93127),S=e(16364),d=e(42609),y=e(85018),O=e(8934),u=e(94123),g=e(41054),C=e(86896),D=e(25752),T=e(88972);const n=(0,T.ZP)(D.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:a})=>a.colors.neutral600};
    }
  }
`;var U=e(80826),m=e(93742),I=e(87561);const K=I.Ry().shape({restrictedAccess:I.O7(),password:I.Z_().when("restrictedAccess",(a,h)=>a?h.required(d.translatedErrors.required):h)});var $=e(90306);const x=()=>{(0,d.useFocusWhenNavigate)();const{formatMessage:a}=(0,C.Z)(),{submitMutation:h,data:B,isLoading:Q}=(0,$.Z)(),[L,w]=(0,t.useState)(!1),N=Z=>{h.mutate({prefix:B?.prefix,body:Z})};return t.createElement(r.o,null,Q?t.createElement(d.LoadingIndicatorPage,null,"Plugin settings are loading"):t.createElement(g.J9,{initialValues:{restrictedAccess:B?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:N,validationSchema:K},({handleSubmit:Z,values:p,handleChange:j,errors:W,setFieldTouched:G,setFieldValue:F})=>t.createElement(d.Form,{noValidate:!0,onSubmit:Z},t.createElement(i.T,{title:a({id:(0,m.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:a({id:(0,m.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:t.createElement(d.CheckPermissions,{permissions:U.Z.update},t.createElement(l.z,{type:"submit",startIcon:t.createElement(y.Z,null)},a({id:(0,m.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})))}),t.createElement(R.D,null,t.createElement(v.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(M.k,{direction:"column",alignItems:"stretch",gap:4},t.createElement(c.Z,{variant:"delta",as:"h2"},a({id:"global.settings",defaultMessage:"Settings"})),t.createElement(P.r,{gap:4},t.createElement(E.P,{col:6,s:12},t.createElement(A.s,{name:"restrictedAccess",label:a({id:(0,m.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:a({id:(0,m.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:p.restrictedAccess,onChange:()=>{p.restrictedAccess===!0&&(F("password","",!1),G("password",!1,!1)),F("restrictedAccess",!p.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),p.restrictedAccess&&t.createElement(E.P,{col:6,s:12},t.createElement(S.o,{label:a({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:L?"text":"password",value:p.password,onChange:j,error:W.password?a({id:W.password,defaultMessage:"Invalid value"}):null,endAction:t.createElement(n,{onClick:H=>{H.stopPropagation(),w(X=>!X)},label:a(L?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},L?t.createElement(O.Z,null):t.createElement(u.Z,null))})))))))))}},90306:(f,o,e)=>{e.d(o,{Z:()=>v});var t=e(42609),r=e(88767),i=e(49950),l=e(798);const v=()=>{const M=(0,r.useQueryClient)(),c=(0,t.useNotification)(),{isLoading:P,isError:E,data:A}=(0,r.useQuery)(["get-documentation",i.Z],async()=>{try{const{data:s}=await O(`/${i.Z}/getInfos`);return s}catch{return c({type:"warning",message:{id:"notification.error"}}),null}}),{del:S,post:d,put:y,get:O}=(0,t.useFetchClient)(),u=s=>{c({type:"warning",message:s.response.payload.message})},g=(s,n)=>{M.invalidateQueries("get-documentation"),c({type:s,message:{id:(0,l.Z)(n)}})},C=(0,r.useMutation)(({prefix:s,version:n})=>S(`${s}/deleteDoc/${n}`),{onSuccess:()=>g("info","notification.delete.success"),onError:s=>u(s)}),D=(0,r.useMutation)(({prefix:s,body:n})=>y(`${s}/updateSettings`,n),{onSuccess:()=>g("success","notification.update.success"),onError:u}),T=(0,r.useMutation)(({prefix:s,version:n})=>d(`${s}/regenerateDoc`,{version:n}),{onSuccess:()=>g("info","notification.generate.success"),onError:s=>u(s)});return{data:A,isLoading:P,isError:E,deleteMutation:C,submitMutation:D,regenerateDocMutation:T}}},798:(f,o,e)=>{e.d(o,{Z:()=>i});var t=e(49950);const i=l=>`${t.Z}.${l}`},93742:(f,o,e)=>{e.d(o,{O:()=>t.Z});var t=e(798)}}]);
