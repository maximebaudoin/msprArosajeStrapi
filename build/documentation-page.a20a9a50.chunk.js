"use strict";(self.webpackChunkmspr_arosaje_strapi=self.webpackChunkmspr_arosaje_strapi||[]).push([[9789],{75730:(D,u,t)=>{t.r(u),t.d(u,{default:()=>V});var e=t(53547),i=t(17034),c=t(49066),v=t(41580),A=t(185),T=t(53979),p=t(29728),f=t(38939),M=t(8060),P=t(79031),g=t(37909),m=t(84170),y=t(15234),O=t(11047),h=t(12028),o=t(42609),E=t(8934),L=t(30815),Z=t(20022),B=t(64593),n=t(86896),r=t(80826),d=t(93742);const U=s=>{const l=(()=>s.startsWith("/")?`${window.strapi.backendURL}${s}`:s.startsWith("http")?s:`${window.strapi.backendURL}/${s}`)();return window.open(l,"_blank"),window.focus()};var K=t(90306);const V=()=>{(0,o.useFocusWhenNavigate)();const{formatMessage:s}=(0,n.Z)(),{data:l,isLoading:W,isError:N,deleteMutation:Q,regenerateDocMutation:F}=(0,K.Z)(),[C,$]=(0,e.useState)(!1),[j,I]=(0,e.useState)(!1),[H,X]=(0,e.useState)(),z=4,G=(l?.docVersions?.length||0)+1,S=a=>{const R=l?.prefix.startsWith("/")?"":"/";U(`${R}${l?.prefix}/v${a}`)},J=a=>{F.mutate({version:a,prefix:l?.prefix})},Y=()=>{$(!C)},w=async()=>{I(!0),await Q.mutateAsync({prefix:l?.prefix,version:H}),$(!C),I(!1)},b=a=>{X(a),$(!C)},x=s({id:(0,d.O)("plugin.name"),defaultMessage:"Documentation"});return N?e.createElement(i.A,null,e.createElement(c.D,null,e.createElement(v.x,{paddingTop:8},e.createElement(o.AnErrorOccurred,null)))):e.createElement(i.A,null,e.createElement(B.q,{title:x}),e.createElement(A.o,{"aria-busy":W},e.createElement(T.T,{title:x,subtitle:s({id:(0,d.O)("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(o.CheckPermissions,{permissions:r.Z.open},e.createElement(p.z,{onClick:()=>S(l?.currentVersion),startIcon:e.createElement(E.Z,null)},s({id:(0,d.O)("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})))}),e.createElement(c.D,null,W&&e.createElement(o.LoadingIndicatorPage,null,"Plugin is loading"),l?.docVersions.length?e.createElement(f.i,{colCount:z,rowCount:G},e.createElement(M.h,null,e.createElement(P.Tr,null,e.createElement(g.Th,null,e.createElement(m.Z,{variant:"sigma",textColor:"neutral600"},s({id:(0,d.O)("pages.PluginPage.table.version"),defaultMessage:"Version"}))),e.createElement(g.Th,null,e.createElement(m.Z,{variant:"sigma",textColor:"neutral600"},s({id:(0,d.O)("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"}))))),e.createElement(y.p,null,l.docVersions.sort((a,R)=>a.generatedDate<R.generatedDate?1:-1).map(a=>e.createElement(P.Tr,{key:a.version},e.createElement(g.Td,{width:"50%"},e.createElement(m.Z,null,a.version)),e.createElement(g.Td,{width:"50%"},e.createElement(m.Z,null,a.generatedDate)),e.createElement(g.Td,null,e.createElement(O.k,{justifyContent:"end",...o.stopPropagation},e.createElement(h.h,{onClick:()=>S(a.version),noBorder:!0,icon:e.createElement(E.Z,null),label:s({id:(0,d.O)("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${a.version}`})}),e.createElement(o.CheckPermissions,{permissions:r.Z.regenerate},e.createElement(h.h,{onClick:()=>J(a.version),noBorder:!0,icon:e.createElement(L.default,null),label:s({id:(0,d.O)("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${a.version}`})})),e.createElement(o.CheckPermissions,{permissions:r.Z.update},a.version!==l.currentVersion&&e.createElement(h.h,{onClick:()=>b(a.version),noBorder:!0,icon:e.createElement(Z.Z,null),label:s({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${a.version}`})})))))))):e.createElement(o.EmptyStateLayout,null)),e.createElement(o.ConfirmDialog,{isConfirmButtonLoading:j,onConfirm:w,onToggleDialog:Y,isOpen:C})))}},90306:(D,u,t)=>{t.d(u,{Z:()=>T});var e=t(42609),i=t(88767),c=t(49950),v=t(798);const T=()=>{const p=(0,i.useQueryClient)(),f=(0,e.useNotification)(),{isLoading:M,isError:P,data:g}=(0,i.useQuery)(["get-documentation",c.Z],async()=>{try{const{data:n}=await h(`/${c.Z}/getInfos`);return n}catch{return f({type:"warning",message:{id:"notification.error"}}),null}}),{del:m,post:y,put:O,get:h}=(0,e.useFetchClient)(),o=n=>{f({type:"warning",message:n.response.payload.message})},E=(n,r)=>{p.invalidateQueries("get-documentation"),f({type:n,message:{id:(0,v.Z)(r)}})},L=(0,i.useMutation)(({prefix:n,version:r})=>m(`${n}/deleteDoc/${r}`),{onSuccess:()=>E("info","notification.delete.success"),onError:n=>o(n)}),Z=(0,i.useMutation)(({prefix:n,body:r})=>O(`${n}/updateSettings`,r),{onSuccess:()=>E("success","notification.update.success"),onError:o}),B=(0,i.useMutation)(({prefix:n,version:r})=>y(`${n}/regenerateDoc`,{version:r}),{onSuccess:()=>E("info","notification.generate.success"),onError:n=>o(n)});return{data:g,isLoading:M,isError:P,deleteMutation:L,submitMutation:Z,regenerateDocMutation:B}}},798:(D,u,t)=>{t.d(u,{Z:()=>c});var e=t(49950);const c=v=>`${e.Z}.${v}`},93742:(D,u,t)=>{t.d(u,{O:()=>e.Z});var e=t(798)}}]);
